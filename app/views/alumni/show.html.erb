<h1>Alumnus Profile</h1>
<p><strong>UIN:</strong> <%= @alumnus.uin %></p>
<p><strong>Email:</strong> <%= @alumnus.email %></p>

<h2>Experiences</h2>

<ul id="claimed_experiences">
  <% @alumnus.experiences.each do |experience| %>
    <li data-id="<%= experience.id %>">
      <strong><%= experience.title %> (<%= experience.experience_type %>)</strong>  
      <br>
      <a href="#" class="remove_experience" data-id="<%= experience.id %>">Remove</a>
    </li>
  <% end %>
</ul>

<h3>Claim Experiences</h3>
<p>Double-click an experience to claim it. Select "Other" to add a new one.</p>

<select id="experience_list" size="5">
  <% Experience.all.each do |experience| %>
    <option value="<%= experience.id %>"><%= experience.title %> - <%= experience.experience_type %></option>
  <% end %>
  <option value="other">Other (Create New Experience)</option>
</select>

<%= form_with url: claim_experiences_alumnus_path(@alumnus), method: :post, id: "experience_form" do %>
  <div id="experience_ids_container">
    <% @alumnus.experience_ids.each do |id| %>
      <input type="hidden" name="experience_ids[]" value="<%= id %>">
    <% end %>
  </div>
<% end %>

<div id="experience_modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Add a New Experience</h2>

    <%= form_with model: Experience.new, url: experiences_path, method: :post, id: "new_experience_form", remote: true do |f| %>
      <div>
        <%= f.label :title, "Experience Title" %>
        <%= f.text_field :title, required: true %>
      </div>
    
      <div>
        <%= f.label :experience_type, "Experience Type" %>
        <%= f.text_field :experience_type, required: true %>
      </div>
      
      <input type="hidden" name="experience[alumnus_id]" value="<%= @alumnus.id %>">
    
      <%= f.submit "Save Experience" %>
    <% end %>
  </div>
</div>
<p><%= link_to "Back to Alumni List", alumni_path %></p>


<style>
  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
  }

  .modal-content {
    background-color: white;
    margin: 10% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 50%;
  }

  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }
</style>